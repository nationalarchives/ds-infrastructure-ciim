{
  "#type": "merge",
  "depth": -1,
  "values": [
    "$.current",
    {
      "#type": "require",
      "require": "$.original.query[?(@.subjectId == 'true')]",
      "value": {
        "results": {
          "request": {
            "aggs": {
              "subjectId": {
                "terms": {
                  "field": "subjects.subject.@admin.id.keyword",
                  "size": 10
                },
                "aggs": {
                  "title": {
                    "terms": {
                      "field": "subjects.subject.summary.title.keyword",
                      "size": 1
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  ]
}