{
  "#type": "merge",
  "values": [
    "$.request",
    {
      "aggregations": {
        "#type": "as_list",
        "values": {
          "#type": "fallback",
          "strategies": [
            "$.request.aggregations",
            {
              "#type": "require",
              "require": "$.request[?(!(@.ids))]",
              "value": [
                "m_type",
                "provider",
                "r_type",
                "r_type_actual",
                "c_maker",
                "agent",
                "subject",
                "category",
                "date_made",
                "multimedia.@processed.original.format"
              ]
            }
          ]
        }
      }
    }
  ]
}